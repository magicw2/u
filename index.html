<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrowthPulse Analytics | Professional Social Media Analysis</title>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4bb543;
            --warning: #ffcc00;
            --danger: #dc3545;
            --gray: #6c757d;
            --light-gray: #e9ecef;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fb;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .logo span {
            color: var(--accent);
        }
        
        .tagline {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-top: -5px;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 2rem;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: opacity 0.3s;
        }
        
        nav a:hover {
            opacity: 0.8;
        }
        
        /* Hero Section */
        .hero {
            padding: 4rem 0;
            text-align: center;
            background: linear-gradient(rgba(67, 97, 238, 0.05), rgba(58, 12, 163, 0.05));
        }
        
        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--secondary);
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            color: var(--gray);
        }
        
        .pro-badge {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.3);
        }
        
        /* Input Section */
        .input-section {
            background: white;
            padding: 2.5rem;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .input-row {
            display: flex;
            gap: 1rem;
        }
        
        .url-input {
            flex: 1;
        }
        
        .platform-select {
            width: 180px;
        }
        
        label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: block;
            color: var(--dark);
        }
        
        input, select {
            padding: 0.8rem 1rem;
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            font-size: 1rem;
            width: 100%;
            transition: all 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        .analyze-btn {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 0 auto;
        }
        
        .analyze-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 7px 14px rgba(67, 97, 238, 0.3);
        }
        
        .analyze-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        .analyze-btn:active {
            transform: translateY(0);
        }
        
        .sample-link {
            text-align: center;
            margin-top: 1rem;
        }
        
        .sample-link a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        .sample-link a:hover {
            text-decoration: underline;
        }
        
        /* Platform Detection */
        .platform-detected {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            color: #2e7d32;
            padding: 0.8rem;
            border-radius: 8px;
            margin: 0.5rem 0;
            text-align: center;
            display: none;
        }
        
        /* Loading Animation */
        .loader {
            width: 20px;
            height: 20px;
            border: 2px solid #ffffff;
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            animation: rotation 1s linear infinite;
        }
        
        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Error Message */
        .error-message {
            background: #fee;
            border: 1px solid #fcc;
            color: #c33;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            text-align: center;
            display: none;
        }
        
        /* Analysis Status */
        .analysis-status {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            color: #1565c0;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            text-align: center;
            display: none;
        }
        
        /* Report Section */
        .report-section {
            display: none;
            margin-top: 3rem;
            padding-bottom: 4rem;
        }
        
        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .report-title {
            font-size: 1.8rem;
            color: var(--secondary);
        }
        
        .download-btn {
            background: white;
            color: var(--primary);
            border: 1px solid var(--primary);
            padding: 0.6rem 1.2rem;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .download-btn:hover {
            background: var(--primary);
            color: white;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 1rem 1.5rem;
            cursor: pointer;
            font-weight: 500;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Summary Tab */
        .health-score {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            position: relative;
        }
        
        .score-circle::before {
            content: '';
            position: absolute;
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 50%;
        }
        
        .score-value {
            position: relative;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--dark);
        }
        
        .score-text {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .key-takeaways {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .takeaway-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        .takeaway-card h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 1rem;
            color: var(--secondary);
        }
        
        .strength .icon {
            color: var(--success);
        }
        
        .weakness .icon {
            color: var(--danger);
        }
        
        /* Analysis Tab - Your requested style */
        .professional-metrics {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }
        
        .metrics-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        .metrics-table th, .metrics-table td {
            padding: 0.8rem;
            text-align: left;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .metrics-table th {
            background: var(--light);
            font-weight: 600;
            color: var(--secondary);
        }
        
        .metrics-table tr:hover {
            background: rgba(67, 97, 238, 0.02);
        }
        
        .metric-trend {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .trend-up {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success);
        }
        
        .trend-down {
            background: rgba(220, 53, 69, 0.1);
            color: var(--danger);
        }
        
        .trend-neutral {
            background: rgba(255, 204, 0, 0.1);
            color: var(--warning);
        }
        
        .chart-container {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }
        
        .chart-placeholder {
            height: 300px;
            background: var(--light-gray);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
        }
        
        /* Enhanced Growth Plan Styles */
        .growth-plan-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .growth-plan-header h3 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }
        
        .growth-plan-header p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .phase {
            margin-bottom: 3rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }
        
        .phase-header {
            background: var(--light);
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        
        .phase-number {
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .phase-title-content {
            flex: 1;
        }
        
        .phase-title {
            font-size: 1.5rem;
            color: var(--secondary);
            margin-bottom: 0.5rem;
        }
        
        .phase-timeline {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 500;
        }
        
        .phase-objectives {
            background: rgba(67, 97, 238, 0.05);
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .phase-objectives h4 {
            color: var(--secondary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .objectives-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .objective {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .steps {
            padding: 2rem;
        }
        
        .step {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 1.5rem;
            border: 1px solid var(--light-gray);
        }
        
        .step-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .step-number {
            background: var(--light-gray);
            color: var(--dark);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1rem;
            flex-shrink: 0;
        }
        
        .step-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--dark);
            flex: 1;
        }
        
        .step-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }
        
        .step-action, .step-reason {
            padding: 1.2rem;
            border-radius: 8px;
        }
        
        .step-action {
            background: rgba(67, 97, 238, 0.05);
            border-left: 4px solid var(--primary);
        }
        
        .step-reason {
            background: rgba(76, 201, 240, 0.05);
            border-left: 4px solid var(--accent);
        }
        
        .step-action h4, .step-reason h4 {
            margin-bottom: 0.8rem;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .metrics-impact {
            background: rgba(75, 181, 67, 0.05);
            padding: 1.2rem;
            border-radius: 8px;
            border-left: 4px solid var(--success);
            margin-top: 1rem;
        }
        
        .metrics-impact h4 {
            color: var(--success);
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .metrics-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.8rem;
        }
        
        .metric-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(75, 181, 67, 0.2);
        }
        
        .metric-name {
            font-weight: 500;
        }
        
        .metric-value {
            color: var(--success);
            font-weight: 600;
        }
        
        .tools-resources {
            background: rgba(255, 204, 0, 0.05);
            padding: 1.2rem;
            border-radius: 8px;
            border-left: 4px solid var(--warning);
            margin-top: 1rem;
        }
        
        .tools-resources h4 {
            color: var(--warning);
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .tools-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.8rem;
        }
        
        .tool-item {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 204, 0, 0.2);
        }
        
        /* Platform Icons */
        .platform-icon {
            width: 24px;
            height: 24px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            margin-right: 8px;
            font-weight: bold;
            color: white;
        }
        
        .youtube-icon {
            background: #FF0000;
        }
        
        .instagram-icon {
            background: #E4405F;
        }
        
        .tiktok-icon {
            background: #000000;
        }
        
        .twitter-icon {
            background: #1DA1F2;
        }
        
        .linkedin-icon {
            background: #0A66C2;
        }
        
        .facebook-icon {
            background: #1877F2;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 1rem;
            }
            
            .input-row {
                flex-direction: column;
            }
            
            .platform-select {
                width: 100%;
            }
            
            .step-content {
                grid-template-columns: 1fr;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                text-align: center;
            }
            
            .phase-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .objectives-list {
                grid-template-columns: 1fr;
            }
            
            .metrics-list, .tools-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="navbar">
                <div class="logo">
                    <h1>Growth<span>Pulse</span></h1>
                    <div class="tagline">Professional Social Media Analytics</div>
                </div>
                <nav>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Analysis</a></li>
                        <li><a href="#">Solutions</a></li>
                        <li><a href="#">Resources</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="pro-badge">PROFESSIONAL SOCIAL MEDIA ANALYTICS</div>
            <h2>Data-Driven Social Media Growth Strategy</h2>
            <p>Get comprehensive analytics and professional growth strategies to optimize your social media performance and maximize engagement.</p>
            
            <div class="input-section">
                <div class="input-group">
                    <div class="input-row">
                        <div class="url-input">
                            <label for="profile-url">Enter Social Media Profile URL</label>
                            <input type="text" id="profile-url" placeholder="https://youtube.com/c/username or https://instagram.com/username">
                        </div>
                        <div class="platform-select">
                            <label for="platform">Select Platform (Auto-detected)</label>
                            <select id="platform" disabled>
                                <option value="auto">Auto-detect from URL</option>
                                <option value="youtube">YouTube</option>
                                <option value="instagram">Instagram</option>
                                <option value="tiktok">TikTok</option>
                                <option value="twitter">X (Twitter)</option>
                                <option value="linkedin">LinkedIn</option>
                                <option value="facebook">Facebook</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div id="platform-detected" class="platform-detected">
                    <!-- Platform detection message will appear here -->
                </div>
                
                <button class="analyze-btn" id="analyze-btn">
                    <span id="analyze-text">Generate Professional Analysis</span>
                    <div id="analyze-loader" class="loader" style="display: none;"></div>
                </button>
                <div class="sample-link">
                    <a href="#" id="sample-youtube">Try YouTube Analysis</a> | 
                    <a href="#" id="sample-instagram">Try Instagram Analysis</a> |
                    <a href="#" id="sample-tiktok">Try TikTok Analysis</a>
                </div>
                
                <div id="error-message" class="error-message"></div>
                <div id="analysis-status" class="analysis-status"></div>
            </div>
        </div>
    </section>

    <!-- Report Section -->
    <section class="report-section" id="report-section">
        <div class="container">
            <div class="report-header">
                <h2 class="report-title" id="report-title">Professional Social Media Analysis</h2>
                <button class="download-btn" id="download-btn">
                    <span>Download Report</span>
                </button>
            </div>
            
            <div class="tabs">
                <div class="tab active" data-tab="summary">Performance Summary</div>
                <div class="tab" data-tab="analysis">In-Depth Analytics</div>
                <div class="tab" data-tab="growth-plan">Strategic Growth Plan</div>
            </div>
            
            <!-- Summary Tab -->
            <div class="tab-content active" id="summary-tab">
                <div class="health-score">
                    <div class="score-circle" id="score-circle">
                        <!-- Dynamic score circle will be inserted here -->
                    </div>
                    <div class="score-text" id="score-text">Performance Analysis Complete</div>
                </div>
                
                <div class="key-takeaways" id="key-takeaways">
                    <!-- Dynamic content will be inserted here -->
                </div>
            </div>
            
            <!-- Analysis Tab - Your requested style -->
            <div class="tab-content" id="analysis-tab">
                <div class="professional-metrics">
                    <h3>Performance Metrics Overview</h3>
                    <table class="metrics-table">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Current Value</th>
                                <th>Benchmark</th>
                                <th>Trend</th>
                                <th>Insight</th>
                            </tr>
                        </thead>
                        <tbody id="metrics-table-body">
                            <!-- Dynamic metrics will be inserted here -->
                        </tbody>
                    </table>
                </div>
                
                <div class="chart-container">
                    <h3>Engagement Performance Analysis</h3>
                    <div class="chart-placeholder" id="engagement-analysis">
                        Professional engagement metrics and performance indicators
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3>Content Strategy Effectiveness</h3>
                    <div class="chart-placeholder" id="content-analysis">
                        Content performance metrics and optimization opportunities
                    </div>
                </div>
            </div>
            
            <!-- Growth Plan Tab -->
            <div class="tab-content" id="growth-plan-tab">
                <div id="growth-plan-content">
                    <!-- Dynamic growth plan will be inserted here -->
                </div>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const analyzeBtn = document.getElementById('analyze-btn');
            const profileUrlInput = document.getElementById('profile-url');
            const platformSelect = document.getElementById('platform');
            const platformDetected = document.getElementById('platform-detected');
            const sampleYoutube = document.getElementById('sample-youtube');
            const sampleInstagram = document.getElementById('sample-instagram');
            const sampleTiktok = document.getElementById('sample-tiktok');
            const reportSection = document.getElementById('report-section');
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const errorMessage = document.getElementById('error-message');
            const analysisStatus = document.getElementById('analysis-status');
            const analyzeText = document.getElementById('analyze-text');
            const analyzeLoader = document.getElementById('analyze-loader');

            // Store analysis results to ensure consistency
            let currentAnalysis = null;
            let currentProfileUrl = null;

            // Platform detection from URL
            profileUrlInput.addEventListener('input', function() {
                const url = this.value.trim();
                const detectedPlatform = detectPlatformFromUrl(url);
                
                if (detectedPlatform) {
                    const platformName = detectedPlatform.charAt(0).toUpperCase() + detectedPlatform.slice(1);
                    platformDetected.innerHTML = `
                        <strong>Platform detected:</strong> 
                        <span class="platform-icon ${detectedPlatform}-icon">${platformName.charAt(0)}</span>
                        ${platformName}
                        <span style="margin-left: 10px; font-size: 0.9em; color: #666;">
                        Analysis will focus on ${platformName}-specific metrics</span>
                    `;
                    platformDetected.style.display = 'block';
                    platformSelect.value = detectedPlatform;
                } else {
                    platformDetected.style.display = 'none';
                    platformSelect.value = 'auto';
                }
            });

            // Platform detection function
            function detectPlatformFromUrl(url) {
                if (!url) return null;
                
                const urlLower = url.toLowerCase();
                
                if (urlLower.includes('youtube.com') || 
                    urlLower.includes('youtu.be') || 
                    urlLower.includes('youtube.com/c/') ||
                    urlLower.includes('youtube.com/@') ||
                    urlLower.includes('youtube.com/channel/') ||
                    urlLower.includes('youtube.com/user/')) {
                    return 'youtube';
                }
                
                if (urlLower.includes('instagram.com') || 
                    urlLower.includes('instagr.am')) {
                    return 'instagram';
                }
                
                if (urlLower.includes('tiktok.com') || 
                    urlLower.includes('tiktok.com/@')) {
                    return 'tiktok';
                }
                
                if (urlLower.includes('twitter.com') || 
                    urlLower.includes('x.com')) {
                    return 'twitter';
                }
                
                if (urlLower.includes('linkedin.com') || 
                    urlLower.includes('linkedin.com/in/') ||
                    urlLower.includes('linkedin.com/company/')) {
                    return 'linkedin';
                }
                
                if (urlLower.includes('facebook.com') || 
                    urlLower.includes('fb.com') ||
                    urlLower.includes('facebook.com/groups/')) {
                    return 'facebook';
                }
                
                return null;
            }

            // Analyze button click handler
            analyzeBtn.addEventListener('click', function() {
                const profileUrl = profileUrlInput.value.trim();
                let platform = platformSelect.value;
                
                // If auto-detect, try to detect from URL
                if (platform === 'auto') {
                    platform = detectPlatformFromUrl(profileUrl);
                    if (!platform) {
                        showError('Please enter a valid social media URL or select a platform manually');
                        return;
                    }
                }
                
                if (!profileUrl) {
                    showError('Please enter a social media URL');
                    return;
                }

                // Show loading state
                analyzeBtn.disabled = true;
                analyzeText.textContent = `Analyzing ${platform.charAt(0).toUpperCase() + platform.slice(1)} Profile...`;
                analyzeLoader.style.display = 'inline-block';
                hideError();
                showStatus(`Starting ${platform} analysis...`);

                // Simulate analysis with realistic data
                setTimeout(() => {
                    try {
                        // Check if we already have an analysis for this URL
                        if (currentProfileUrl === profileUrl && currentAnalysis) {
                            // Use cached analysis
                            displayAnalysisResults(currentAnalysis, profileUrl);
                            showStatus(`Using cached analysis for ${platform}`);
                        } else {
                            // Generate new analysis
                            const analysis = generateSocialMediaAnalysis(profileUrl, platform);
                            currentAnalysis = analysis;
                            currentProfileUrl = profileUrl;
                            displayAnalysisResults(analysis, profileUrl);
                        }
                        
                        // Show report section
                        reportSection.style.display = 'block';
                        reportSection.scrollIntoView({ behavior: 'smooth' });
                        
                        showStatus(`${platform.charAt(0).toUpperCase() + platform.slice(1)} analysis complete!`);
                        
                    } catch (error) {
                        console.error('Analysis error:', error);
                        showError('Failed to generate analysis: ' + error.message);
                    } finally {
                        // Reset button state
                        analyzeBtn.disabled = false;
                        analyzeText.textContent = 'Generate Professional Analysis';
                        analyzeLoader.style.display = 'none';
                        setTimeout(() => hideStatus(), 3000);
                    }
                }, 1500);
            });

            // Sample YouTube analysis
            sampleYoutube.addEventListener('click', function(e) {
                e.preventDefault();
                profileUrlInput.value = 'https://www.youtube.com/c/ProfessionalCreator';
                platformSelect.value = 'youtube';
                platformDetected.innerHTML = `
                    <strong>Platform detected:</strong> 
                    <span class="platform-icon youtube-icon">Y</span>
                    YOUTUBE 
                    <span style="margin-left: 10px; font-size: 0.9em; color: #666;">
                    Analysis will focus on YouTube-specific metrics</span>
                `;
                platformDetected.style.display = 'block';
                analyzeBtn.click();
            });

            // Sample Instagram analysis
            sampleInstagram.addEventListener('click', function(e) {
                e.preventDefault();
                profileUrlInput.value = 'https://www.instagram.com/successfulcreator/';
                platformSelect.value = 'instagram';
                platformDetected.innerHTML = `
                    <strong>Platform detected:</strong> 
                    <span class="platform-icon instagram-icon">I</span>
                    INSTAGRAM 
                    <span style="margin-left: 10px; font-size: 0.9em; color: #666;">
                    Analysis will focus on Instagram-specific metrics</span>
                `;
                platformDetected.style.display = 'block';
                analyzeBtn.click();
            });

            // Sample TikTok analysis
            sampleTiktok.addEventListener('click', function(e) {
                e.preventDefault();
                profileUrlInput.value = 'https://www.tiktok.com/@trendingcreator';
                platformSelect.value = 'tiktok';
                platformDetected.innerHTML = `
                    <strong>Platform detected:</strong> 
                    <span class="platform-icon tiktok-icon">T</span>
                    TIKTOK 
                    <span style="margin-left: 10px; font-size: 0.9em; color: #666;">
                    Analysis will focus on TikTok-specific metrics</span>
                `;
                platformDetected.style.display = 'block';
                analyzeBtn.click();
            });

            // Tab switching
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    this.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });

            // Download button
            document.getElementById('download-btn').addEventListener('click', function() {
                const reportTitle = document.getElementById('report-title').textContent;
                const reportContent = document.getElementById('report-section').innerText;
                
                const blob = new Blob([`${reportTitle}\n\n${reportContent}`], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'social-media-analysis.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });

            // Generate social media analysis
            function generateSocialMediaAnalysis(profileUrl, platform) {
                // Generate consistent analysis based on URL hash
                const urlHash = hashCode(profileUrl);
                const rng = createSeededRandom(urlHash);
                
                // Platform-specific metrics
                const platformMetrics = {
                    youtube: {
                        engagement_rate: (4.2 + rng() * 2.5).toFixed(1) + '%',
                        avg_views: Math.floor(2500 + rng() * 7500).toLocaleString(),
                        avg_likes: Math.floor(120 + rng() * 180),
                        retention_rate: (52 + rng() * 28).toFixed(0) + '%',
                        ctr: (4.8 + rng() * 3).toFixed(1) + '%',
                        subscriber_growth: (3.5 + rng() * 4).toFixed(1) + '%',
                        watch_time: (Math.floor(45 + rng() * 30)) + ' minutes',
                        upload_consistency: (75 + rng() * 20).toFixed(0) + '%',
                        comment_engagement: (2.1 + rng() * 1.5).toFixed(1) + '%',
                        shares_per_video: Math.floor(15 + rng() * 25)
                    },
                    instagram: {
                        engagement_rate: (2.8 + rng() * 1.5).toFixed(1) + '%',
                        avg_likes: Math.floor(350 + rng() * 650),
                        avg_comments: Math.floor(15 + rng() * 25),
                        reach_rate: (18 + rng() * 12).toFixed(0) + '%',
                        follower_growth: (2.2 + rng() * 2.5).toFixed(1) + '%',
                        story_views: Math.floor(800 + rng() * 1200),
                        content_consistency: (70 + rng() * 25).toFixed(0) + '%',
                        hashtag_performance: (65 + rng() * 25).toFixed(0) + '%',
                        saves_per_post: Math.floor(25 + rng() * 35),
                        shares_per_post: Math.floor(12 + rng() * 18)
                    },
                    tiktok: {
                        engagement_rate: (5.2 + rng() * 3).toFixed(1) + '%',
                        avg_views: Math.floor(5000 + rng() * 10000).toLocaleString(),
                        avg_likes: Math.floor(800 + rng() * 1200),
                        avg_comments: Math.floor(25 + rng() * 40),
                        follower_growth: (4.5 + rng() * 5).toFixed(1) + '%',
                        video_completion_rate: (65 + rng() * 25).toFixed(0) + '%',
                        content_consistency: (60 + rng() * 30).toFixed(0) + '%',
                        hashtag_performance: (70 + rng() * 20).toFixed(0) + '%',
                        shares_per_video: Math.floor(35 + rng() * 45),
                        trend_participation: (55 + rng() * 35).toFixed(0) + '%'
                    }
                };

                const metrics = platformMetrics[platform] || platformMetrics.youtube;
                
                // Consistent score based on URL
                const profileScore = Math.floor(60 + (rng() * 35));
                
                // Platform-specific strengths and weaknesses
                const platformAnalysis = {
                    youtube: {
                        strengths: [
                            "Strong video content strategy with high production quality",
                            "Effective use of YouTube SEO and keyword optimization",
                            "Consistent upload schedule maintaining audience engagement",
                            "High audience retention rates indicating quality content",
                            "Good subscriber growth momentum and community building"
                        ],
                        weaknesses: [
                            "Limited use of YouTube Shorts for audience expansion",
                            "Community tab underutilized for audience interaction",
                            "Playlist organization could be optimized for viewer journey",
                            "End screen and card usage could be more strategic",
                            "Thumbnail A/B testing could improve click-through rates"
                        ]
                    },
                    instagram: {
                        strengths: [
                            "Visually appealing content with strong brand identity",
                            "Effective use of Instagram Stories for engagement",
                            "Strategic hashtag usage increasing discoverability",
                            "Consistent posting schedule maintaining visibility",
                            "Good use of Reels for reaching new audiences"
                        ],
                        weaknesses: [
                            "Limited use of Instagram Guides for content organization",
                            "IGTV potential underutilized for long-form content",
                            "Engagement with followers could be more personalized",
                            "Shopping features not fully leveraged for monetization",
                            "Analytics could be better utilized for content optimization"
                        ]
                    },
                    tiktok: {
                        strengths: [
                            "Strong understanding of TikTok trends and algorithm",
                            "Consistent posting frequency maintaining visibility",
                            "Engaging video hooks capturing attention quickly",
                            "Effective use of trending sounds and challenges",
                            "Good community engagement through comments and duets"
                        ],
                        weaknesses: [
                            "Limited use of TikTok LIVE for real-time engagement",
                            "Bio and link optimization could be improved",
                            "Cross-promotion to other platforms underutilized",
                            "Video descriptions could be more optimized for SEO",
                            "Collaboration opportunities with other creators missed"
                        ]
                    }
                };
                
                const analysis = platformAnalysis[platform] || platformAnalysis.youtube;
                
                return {
                    profile_score: profileScore,
                    strengths: analysis.strengths,
                    weaknesses: analysis.weaknesses,
                    metrics: metrics,
                    platform: platform,
                    growth_strategy: getPlatformSpecificGrowthPlan(platform, profileScore)
                };
            }

            // Get platform-specific growth plan
            function getPlatformSpecificGrowthPlan(platform, score) {
                const basePlan = {
                    phase1: {
                        title: "Foundation & Content Optimization",
                        timeline: "Weeks 1-4",
                        objectives: [
                            "Establish consistent posting schedule",
                            "Optimize profile and content for platform algorithms",
                            "Build initial engagement momentum"
                        ],
                        steps: []
                    },
                    phase2: {
                        title: "Audience Growth & Community Building",
                        timeline: "Weeks 5-8", 
                        objectives: [
                            "Expand reach through strategic collaborations",
                            "Deepen audience engagement and loyalty",
                            "Implement data-driven content optimization"
                        ],
                        steps: []
                    },
                    phase3: {
                        title: "Monetization & Scaling",
                        timeline: "Weeks 9-12",
                        objectives: [
                            "Develop sustainable revenue streams",
                            "Scale successful content strategies",
                            "Build long-term brand authority"
                        ],
                        steps: []
                    }
                };

                // Platform-specific implementation
                if (platform === 'youtube') {
                    basePlan.phase1.steps = [
                        {
                            title: "YouTube SEO Optimization",
                            action: "Conduct keyword research for your niche using TubeBuddy or VidIQ. Optimize video titles, descriptions, and tags with high-volume keywords. Create custom thumbnails that have a 5-7% CTR.",
                            reason: "Proper SEO can increase organic reach by 40-60% and improve algorithm recommendations",
                            metrics: [
                                ["CTR Improvement", "40-60%"],
                                ["Search Visibility", "50%+"],
                                ["Watch Time", "25%+"]
                            ],
                            tools: ["TubeBuddy", "VidIQ", "Google Trends", "Canva for Thumbnails"]
                        },
                        {
                            title: "Content Structure & Retention",
                            action: "Analyze audience retention graphs to identify drop-off points. Implement the 'hook-hold-payoff' structure: strong opening (0-30s), value delivery (1-5min), and clear CTA. Add chapter timestamps for better navigation.",
                            reason: "Improving retention by 10% can double your video's algorithmic performance",
                            metrics: [
                                ["Audience Retention", "10-15%"],
                                ["Average View Duration", "20%+"],
                                ["Session Watch Time", "30%+"]
                            ],
                            tools: ["YouTube Analytics", "Audience Retention Graphs", "Chapter Markers"]
                        }
                    ];
                    
                    basePlan.phase2.steps = [
                        {
                            title: "Strategic Collaboration Framework",
                            action: "Identify 5-10 creators in your niche with similar audience size. Pitch collaboration ideas that provide mutual value. Co-create content that leverages both audiences' interests. Cross-promote on all platforms.",
                            reason: "Collaborations can drive 65-80% subscriber growth and provide sustainable audience expansion",
                            metrics: [
                                ["Subscriber Growth", "65-80%"],
                                ["Cross-Channel Traffic", "45%+"],
                                ["Engagement Rate", "25%+"]
                            ],
                            tools: ["Social Blade", "Email Outreach", "Collaboration Management Tools"]
                        },
                        {
                            title: "Community & Algorithm Engagement",
                            action: "Implement the 1-hour engagement rule: spend first hour after upload responding to comments. Create pinned comment discussions. Use YouTube Community tab for polls and updates. Host monthly Q&A sessions.",
                            reason: "Early engagement signals boost algorithm performance by 30-50% in first 24 hours",
                            metrics: [
                                ["Comment Engagement", "40%+"],
                                ["Algorithm Boost", "30-50%"],
                                ["Community Growth", "25%+"]
                            ],
                            tools: ["YouTube Studio", "Community Tab", "Scheduled Engagement Time"]
                        }
                    ];
                    
                    basePlan.phase3.steps = [
                        {
                            title: "Multi-Platform Monetization Strategy",
                            action: "Diversify revenue with YouTube Partner Program, channel memberships, merchandise shelf, and affiliate marketing. Create digital products (courses, ebooks) for your niche. Explore brand deals with companies aligned with your audience.",
                            reason: "Diversified income streams increase channel sustainability by 300% and reduce platform dependency",
                            metrics: [
                                ["Revenue Diversification", "300%+"],
                                ["Brand Deal Value", "50%+"],
                                ["Product Conversion", "3-5%"]
                            ],
                            tools: ["YouTube Studio Monetization", "Teespring/Merch", "Affiliate Networks"]
                        },
                        {
                            title: "Content Scaling & Automation",
                            action: "Develop content batch production system. Create template workflows for scripting, filming, and editing. Implement analytics-driven content planning. Build team or outsource repetitive tasks.",
                            reason: "Systematic content production can increase output by 200% while maintaining quality",
                            metrics: [
                                ["Content Output", "200%+"],
                                ["Production Efficiency", "60%+"],
                                ["Team Scalability", "Ready for 2-3 hires"]
                            ],
                            tools: ["Project Management Tools", "Content Calendars", "Analytics Dashboards"]
                        }
                    ];
                }
                else if (platform === 'instagram') {
                    basePlan.phase1.steps = [
                        {
                            title: "Instagram Algorithm Optimization",
                            action: "Post during peak engagement hours (7-9AM, 5-7PM local time). Use 8-15 relevant hashtags per post (mix of popular and niche). Optimize bio with clear value proposition and clickable link. Implement Stories strategy with polls and questions.",
                            reason: "Proper timing and hashtag strategy can increase reach by 50-70% in first 24 hours",
                            metrics: [
                                ["Reach Increase", "50-70%"],
                                ["Hashtag Performance", "40%+"],
                                ["Story Engagement", "35%+"]
                            ],
                            tools: ["Instagram Insights", "Hashtag Research Tools", "Link-in-Bio Services"]
                        },
                        {
                            title: "Content Mix & Reels Strategy",
                            action: "Implement 4-1-1 content ratio: 4 educational/entertainment posts, 1 promotional post, 1 engagement post. Create 3-5 Reels weekly focusing on trending audio and quick value. Use carousel posts for deeper educational content.",
                            reason: "Balanced content mix increases overall engagement by 45% and follower growth by 60%",
                            metrics: [
                                ["Engagement Rate", "45%+"],
                                ["Follower Growth", "60%+"],
                                ["Reels Views", "200%+"]
                            ],
                            tools: ["Instagram Reels", "Canva", "Trending Audio Research"]
                        }
                    ];
                    
                    basePlan.phase2.steps = [
                        {
                            title: "Collaboration & Shoutout Strategy",
                            action: "Identify complementary accounts for story takeovers and collaboration posts. Participate in engagement groups strategically. Run giveaways with partner accounts requiring follows and tags. Use Instagram Live for Q&A sessions with other creators.",
                            reason: "Strategic collaborations can drive 50-80% follower growth and increase engagement by 35%",
                            metrics: [
                                ["Follower Growth", "50-80%"],
                                ["Collaboration Reach", "65%+"],
                                ["Live Engagement", "40%+"]
                            ],
                            tools: ["Engagement Groups", "Collaboration Management", "Giveaway Platforms"]
                        },
                        {
                            title: "Instagram Shopping & Lead Generation",
                            action: "Set up Instagram Shopping if applicable. Use lead generation forms in Stories. Create valuable freebies to grow email list. Implement DM automation for frequently asked questions.",
                            reason: "Proper monetization setup can generate 20-30% of total business revenue through Instagram",
                            metrics: [
                                ["Lead Generation", "25%+"],
                                ["Sales Conversion", "3-5%"],
                                ["Email List Growth", "15%+"]
                            ],
                            tools: ["Instagram Shopping", "Lead Ads", "Email Marketing Integration"]
                        }
                    ];
                    
                    basePlan.phase3.steps = [
                        {
                            title: "Advanced Analytics & Automation",
                            action: "Implement advanced tracking with UTM parameters. Use analytics to identify top-performing content themes. Automate posting schedule and engagement responses. Develop content repurposing system across platforms.",
                            reason: "Data-driven strategy increases content performance by 60% and saves 10+ hours weekly",
                            metrics: [
                                ["Content Performance", "60%+"],
                                ["Time Savings", "10+ hours/week"],
                                ["ROI Tracking", "Fully implemented"]
                            ],
                            tools: ["Analytics Platforms", "Scheduling Tools", "Automation Software"]
                        },
                        {
                            title: "Brand Partnerships & Scaling",
                            action: "Create media kit with audience demographics and engagement rates. Pitch brands aligned with your values and audience. Negotiate long-term partnerships vs one-off posts. Develop affiliate marketing strategy with tracking.",
                            reason: "Strategic brand partnerships can increase monthly revenue by 200-400% for qualified accounts",
                            metrics: [
                                ["Partnership Revenue", "200-400%"],
                                ["Brand Deal Quality", "Strategic partners"],
                                ["Affiliate Income", "15%+ of revenue"]
                            ],
                            tools: ["Media Kit Templates", "Pitch Decks", "Affiliate Tracking"]
                        }
                    ];
                }
                else if (platform === 'tiktok') {
                    basePlan.phase1.steps = [
                        {
                            title: "TikTok Algorithm Mastery",
                            action: "Post 3-5 times daily during peak hours (11AM-2PM, 7-10PM). Use trending sounds within first 6 hours of trending. Implement strong hooks in first 3 seconds. Create content clusters around popular topics in your niche.",
                            reason: "Consistent posting with trending elements can increase views by 300-500% in first month",
                            metrics: [
                                ["View Increase", "300-500%"],
                                ["Follower Growth", "200%+"],
                                ["Trend Participation", "80%+ posts"]
                            ],
                            tools: ["TikTok Creative Center", "Trend Discovery", "Video Editing Apps"]
                        },
                        {
                            title: "Content Strategy & Virality Framework",
                            action: "Follow the 80/20 rule: 80% entertainment/education, 20% promotion. Create series content to build anticipation. Use text overlays for silent viewing. Implement duet and stitch strategies with larger creators.",
                            reason: "Strategic content framework increases viral potential by 400% and follower retention by 60%",
                            metrics: [
                                ["Viral Rate", "400%+"],
                                ["Series Completion", "45%+"],
                                ["Follower Retention", "60%+"]
                            ],
                            tools: ["Content Planning", "Series Framework", "Engagement Analysis"]
                        }
                    ];
                    
                    basePlan.phase2.steps = [
                        {
                            title: "TikTok LIVE & Community Building",
                            action: "Host weekly LIVE sessions focusing on Q&A and behind-the-scenes. Use LIVE gifts and donations as revenue stream. Create TikTok challenges for your niche. Build email list through TikTok lead generation.",
                            reason: "LIVE sessions can generate 30-50% of total TikTok revenue and increase engagement by 70%",
                            metrics: [
                                ["LIVE Revenue", "30-50% of total"],
                                ["Community Engagement", "70%+"],
                                ["Email List Growth", "20%+"]
                            ],
                            tools: ["TikTok LIVE", "Lead Generation", "Community Management"]
                        },
                        {
                            title: "Cross-Platform Growth Strategy",
                            action: "Repurpose top TikTok content to Instagram Reels and YouTube Shorts. Use TikTok to drive traffic to other platforms. Create platform-specific content variations. Implement unified branding across all platforms.",
                            reason: "Cross-platform strategy can increase overall audience by 150% and platform security by eliminating single-platform dependency",
                            metrics: [
                                ["Total Audience Growth", "150%+"],
                                ["Cross-Platform Traffic", "35%+"],
                                ["Brand Consistency", "Unified presence"]
                            ],
                            tools: ["Content Repurposing", "Cross-Platform Analytics", "Brand Guidelines"]
                        }
                    ];
                    
                    basePlan.phase3.steps = [
                        {
                            title: "TikTok Creator Marketplace & Monetization",
                            action: "Join TikTok Creator Marketplace for brand deals. Develop affiliate marketing strategy with TikTok-specific tracking. Create and sell digital products to your audience. Explore TikTok's emerging monetization features.",
                            reason: "Proper monetization setup can generate $1,000-5,000 monthly for accounts with 50k+ engaged followers",
                            metrics: [
                                ["Monthly Revenue", "$1,000-5,000"],
                                ["Brand Deal Value", "Increasing rates"],
                                ["Product Sales", "Sustainable income"]
                            ],
                            tools: ["Creator Marketplace", "Affiliate Programs", "Digital Product Platforms"]
                        },
                        {
                            title: "Scaling & Team Development",
                            action: "Hire video editor for consistent content production. Develop content approval workflows. Implement analytics-driven content strategy. Build management system for brand partnerships.",
                            reason: "Team development enables 300% content output increase while maintaining quality and strategic focus",
                            metrics: [
                                ["Content Output", "300%+"],
                                ["Team Efficiency", "Scalable systems"],
                                ["Partnership Management", "Professionalized"]
                            ],
                            tools: ["Team Management", "Workflow Systems", "Partnership CRM"]
                        }
                    ];
                }

                return basePlan;
            }

            // Simple hash function for consistent results
            function hashCode(str) {
                let hash = 0;
                for (let i = 0; i < str.length; i++) {
                    const char = str.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash; // Convert to 32bit integer
                }
                return Math.abs(hash);
            }

            // Seeded random number generator
            function createSeededRandom(seed) {
                return function() {
                    seed = (seed * 9301 + 49297) % 233280;
                    return seed / 233280;
                };
            }

            // Display analysis results
            function displayAnalysisResults(analysis, profileUrl) {
                // Update report title
                const username = extractUsername(profileUrl, analysis.platform);
                document.getElementById('report-title').textContent = 
                    `${analysis.platform.charAt(0).toUpperCase() + analysis.platform.slice(1)} Professional Analysis: ${username}`;

                // Update health score
                updateHealthScore(analysis.profile_score);
                
                // Update key takeaways
                updateKeyTakeaways(analysis.strengths, analysis.weaknesses, analysis.platform);
                
                // Update metrics table
                updateMetricsTable(analysis.metrics, analysis.platform);
                
                // Update growth plan
                updateGrowthPlan(analysis.growth_strategy);
            }

            // Helper functions
            function extractUsername(profileUrl, platform) {
                try {
                    const urlObj = new URL(profileUrl);
                    const pathParts = urlObj.pathname.split('/').filter(part => part);
                    if (pathParts.length > 0) {
                        let username = pathParts[pathParts.length - 1];
                        if (username) return `@${username}`;
                    }
                } catch (e) {
                    // If URL parsing fails, try simple extraction
                    const matches = profileUrl.match(/(?:\.com\/|\.com\/@)([^\/?]+)/);
                    if (matches && matches[1]) {
                        return `@${matches[1]}`;
                    }
                }
                return `@${platform}_creator`;
            }

            function updateHealthScore(score) {
                const scoreCircle = document.getElementById('score-circle');
                const scoreText = document.getElementById('score-text');
                
                let color = '#4bb543'; // Default green
                if (score < 70) color = '#ffcc00'; // Yellow
                if (score < 50) color = '#dc3545'; // Red
                
                scoreCircle.innerHTML = `
                    <div class="score-value">${score}</div>
                `;
                scoreCircle.style.background = `conic-gradient(${color} 0% ${score}%, var(--light-gray) ${score}% 100%)`;
                
                let text = '';
                if (score >= 80) {
                    text = 'Excellent Performance - Platform Leader';
                } else if (score >= 70) {
                    text = 'Strong Performance - Competitive Edge';
                } else if (score >= 60) {
                    text = 'Good Performance - Growth Potential';
                } else if (score >= 50) {
                    text = 'Developing - Strategic Improvements Needed';
                } else {
                    text = 'Foundation Phase - Significant Opportunity';
                }
                
                scoreText.textContent = text;
                scoreText.style.color = color;
            }

            function updateKeyTakeaways(strengths, weaknesses, platform) {
                const takeawaysContainer = document.getElementById('key-takeaways');
                
                takeawaysContainer.innerHTML = `
                    <div class="takeaway-card strength">
                        <h3><span class="icon">✓</span> ${platform.charAt(0).toUpperCase() + platform.slice(1)} Strengths</h3>
                        <ul>
                            ${strengths.map(strength => `<li>${strength}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="takeaway-card weakness">
                        <h3><span class="icon">⚠</span> Growth Opportunities</h3>
                        <ul>
                            ${weaknesses.map(weakness => `<li>${weakness}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }

            function updateMetricsTable(metrics, platform) {
                const metricsTableBody = document.getElementById('metrics-table-body');
                
                // Platform-specific benchmarks
                const benchmarks = {
                    youtube: {
                        engagement_rate: '4.8%',
                        avg_views: '5,200',
                        avg_likes: '180',
                        retention_rate: '60%',
                        ctr: '6.2%',
                        subscriber_growth: '5.2%',
                        watch_time: '55 minutes',
                        upload_consistency: '80%',
                        comment_engagement: '2.8%',
                        shares_per_video: '25'
                    },
                    instagram: {
                        engagement_rate: '3.2%',
                        avg_likes: '650',
                        avg_comments: '25',
                        reach_rate: '25%',
                        follower_growth: '3.5%',
                        story_views: '1,200',
                        content_consistency: '80%',
                        hashtag_performance: '75%',
                        saves_per_post: '40',
                        shares_per_post: '20'
                    },
                    tiktok: {
                        engagement_rate: '6.5%',
                        avg_views: '8,500',
                        avg_likes: '1,200',
                        avg_comments: '45',
                        follower_growth: '6.2%',
                        video_completion_rate: '75%',
                        content_consistency: '70%',
                        hashtag_performance: '80%',
                        shares_per_video: '60',
                        trend_participation: '75%'
                    }
                };
                
                const benchmark = benchmarks[platform] || benchmarks.youtube;
                
                // Platform-specific metric labels
                const metricLabels = {
                    youtube: [
                        { label: 'Engagement Rate', key: 'engagement_rate', format: 'percent' },
                        { label: 'Average Views', key: 'avg_views', format: 'number' },
                        { label: 'Average Likes', key: 'avg_likes', format: 'number' },
                        { label: 'Audience Retention', key: 'retention_rate', format: 'percent' },
                        { label: 'Click-Through Rate', key: 'ctr', format: 'percent' },
                        { label: 'Subscriber Growth', key: 'subscriber_growth', format: 'percent' },
                        { label: 'Avg Watch Time', key: 'watch_time', format: 'text' },
                        { label: 'Upload Consistency', key: 'upload_consistency', format: 'percent' },
                        { label: 'Comment Engagement', key: 'comment_engagement', format: 'percent' },
                        { label: 'Shares Per Video', key: 'shares_per_video', format: 'number' }
                    ],
                    instagram: [
                        { label: 'Engagement Rate', key: 'engagement_rate', format: 'percent' },
                        { label: 'Average Likes', key: 'avg_likes', format: 'number' },
                        { label: 'Average Comments', key: 'avg_comments', format: 'number' },
                        { label: 'Reach Rate', key: 'reach_rate', format: 'percent' },
                        { label: 'Follower Growth', key: 'follower_growth', format: 'percent' },
                        { label: 'Story Views', key: 'story_views', format: 'number' },
                        { label: 'Content Consistency', key: 'content_consistency', format: 'percent' },
                        { label: 'Hashtag Performance', key: 'hashtag_performance', format: 'percent' },
                        { label: 'Saves Per Post', key: 'saves_per_post', format: 'number' },
                        { label: 'Shares Per Post', key: 'shares_per_post', format: 'number' }
                    ],
                    tiktok: [
                        { label: 'Engagement Rate', key: 'engagement_rate', format: 'percent' },
                        { label: 'Average Views', key: 'avg_views', format: 'number' },
                        { label: 'Average Likes', key: 'avg_likes', format: 'number' },
                        { label: 'Average Comments', key: 'avg_comments', format: 'number' },
                        { label: 'Follower Growth', key: 'follower_growth', format: 'percent' },
                        { label: 'Video Completion Rate', key: 'video_completion_rate', format: 'percent' },
                        { label: 'Content Consistency', key: 'content_consistency', format: 'percent' },
                        { label: 'Hashtag Performance', key: 'hashtag_performance', format: 'percent' },
                        { label: 'Shares Per Video', key: 'shares_per_video', format: 'number' },
                        { label: 'Trend Participation', key: 'trend_participation', format: 'percent' }
                    ]
                };
                
                const metricsConfig = metricLabels[platform] || metricLabels.youtube;
                
                let html = '';
                metricsConfig.forEach(item => {
                    const currentValue = metrics[item.key];
                    const benchmarkValue = benchmark[item.key];
                    
                    // Determine trend based on comparison with benchmark
                    let trend = 'neutral';
                    if (item.format === 'percent' || item.format === 'number') {
                        const currentNum = parseFloat(currentValue);
                        const benchmarkNum = parseFloat(benchmarkValue);
                        if (currentNum > benchmarkNum * 1.1) trend = 'up';
                        else if (currentNum < benchmarkNum * 0.9) trend = 'down';
                    }
                    
                    const trendClass = `trend-${trend}`;
                    const trendSymbol = trend === 'up' ? '↗' : (trend === 'down' ? '↘' : '→');
                    
                    let insight = '';
                    if (trend === 'up') {
                        insight = 'Positive momentum - maintain strategy';
                    } else if (trend === 'down') {
                        insight = 'Monitor closely - consider adjustments';
                    } else {
                        insight = 'Stable performance - opportunity for optimization';
                    }
                    
                    html += `
                        <tr>
                            <td><strong>${item.label}</strong></td>
                            <td>${currentValue}</td>
                            <td>${benchmarkValue}</td>
                            <td><span class="metric-trend ${trendClass}">${trendSymbol} ${trend}</span></td>
                            <td>${insight}</td>
                        </tr>
                    `;
                });
                
                metricsTableBody.innerHTML = html;
            }

            function updateGrowthPlan(growthStrategy) {
                const growthPlanContent = document.getElementById('growth-plan-content');
                
                let html = `
                    <div class="growth-plan-header">
                        <h3>Strategic Growth Roadmap</h3>
                        <p>This 12-week plan provides actionable steps to systematically grow your social media presence with measurable outcomes at each phase.</p>
                    </div>
                `;
                
                Object.keys(growthStrategy).forEach(phaseKey => {
                    const phase = growthStrategy[phaseKey];
                    html += `
                        <div class="phase">
                            <div class="phase-header">
                                <div class="phase-number">${phaseKey.replace('phase', '')}</div>
                                <div class="phase-title-content">
                                    <h3 class="phase-title">${phase.title}</h3>
                                    <div class="phase-timeline">${phase.timeline}</div>
                                </div>
                            </div>
                            
                            <div class="phase-objectives">
                                <h4>📋 Phase Objectives</h4>
                                <div class="objectives-list">
                                    ${phase.objectives.map(objective => `
                                        <div class="objective">${objective}</div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <div class="steps">
                                ${phase.steps.map((step, index) => `
                                    <div class="step">
                                        <div class="step-header">
                                            <div class="step-number">${index + 1}</div>
                                            <div class="step-title">${step.title}</div>
                                        </div>
                                        <div class="step-content">
                                            <div class="step-action">
                                                <h4>🎯 Action Plan</h4>
                                                <p>${step.action}</p>
                                            </div>
                                            <div class="step-reason">
                                                <h4>💡 Strategic Rationale</h4>
                                                <p>${step.reason}</p>
                                            </div>
                                        </div>
                                        ${step.metrics ? `
                                        <div class="metrics-impact">
                                            <h4>📊 Expected Impact</h4>
                                            <div class="metrics-list">
                                                ${step.metrics.map(metric => `
                                                    <div class="metric-item">
                                                        <span class="metric-name">${metric[0]}</span>
                                                        <span class="metric-value">${metric[1]}</span>
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                        ` : ''}
                                        ${step.tools ? `
                                        <div class="tools-resources">
                                            <h4>🛠️ Recommended Tools</h4>
                                            <div class="tools-list">
                                                ${step.tools.map(tool => `
                                                    <div class="tool-item">${tool}</div>
                                                `).join('')}
                                            </div>
                                        </div>
                                        ` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                });
                
                growthPlanContent.innerHTML = html;
            }

            // Error and status handling
            function showError(message) {
                errorMessage.textContent = message;
                errorMessage.style.display = 'block';
            }

            function hideError() {
                errorMessage.style.display = 'none';
            }

            function showStatus(message) {
                analysisStatus.textContent = message;
                analysisStatus.style.display = 'block';
            }

            function hideStatus() {
                analysisStatus.style.display = 'none';
            }
        });
    </script>
</body>
</html>
